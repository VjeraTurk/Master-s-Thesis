% !TeX encoding = windows-1250
\chapter{Uvod}

\gls{pom} je alat  koji omoguæuje opis i sustavnu statistièku procjenu migracija stanovništva na nekom podruèju u zadanom prostorno-vremenskom okviru. \gls{pom} služi za opis grupne mobilnosti i mjerenje socio-ekonomske aktivnosti u nekoj regiji, a najèešæe se koristi u prometnoj znanosti za analizu i strateško planiranje prometnog optereæenja i prometne infrastrukture. 

Osim tradicionalnog pristupa prebrojavanja putovanja i putnika na raskrižjima, anketiranjem ili pomoæu razlièitih strateški postavljenih osjetila, za procjenu \gls{pom}-e koristi se i statistièka analiza podataka iz suvremenih informacijskih i komunikacijskih sustava (zapisi o aktivnostima u javnoj pokretnoj mreži, združena oèitanja prijamnika za satelitsku navigaciju i sl.). Takav suvremeni pristup procjeni \gls{pom} omoguæuje poboljšanje kvalitete procjene preslikavanjem \gls{pom}-e na kontekst. Ako \gls{pom} nosi informaciju o svrsi kretanja, specificira socio-ekonomske aktivnosti koje su pokretaèi putovanja, odnosno motivatori individualne i grupne mobilnosti.

Nedostatci kao što su mali uzorci stanovništva u anketama, neodreðenost polazišta i odredišta putovanja, korištenje podataka koji nisu ažurni, èine tradicionalne metode za procjenu \gls{pom}-e sve manje kompetentnima u rapidno promjenjivim urbanim sredinama.

Pojavom i razvojem velikog broja usluga zasnovanih na lokaciji, prikupljanje podataka o položaju u svrhu pružanja usluge omoguæuje analizu kretanja stanovništva.
Suvremeni izvori podataka o položaju i naèini procjene \gls{pom}-e koji ukljuèuju kontekstualizaciju su nov doprinos u podruèju analize kretanja stanovništva.

Postojeæe metode vrednovanja \gls{pom}-e definiraju vrijednost nove matrice razmatranjem njene sliènosti s postojeæom matricom za isto podruèje.  Postoji potreba da se definira i kvantizira kvaliteta \gls{pom}-e kroz objektivne parametre. 

Rad zapoèinje pregledom postupaka procjene \gls{pom}-e i ukazuje na velike razlike u pristupima. Postupci su podijeljeni na tradicionalne i suvremene. Slijedi pregled postojeæih postupaka vrednovanja \gls{pom}-e baziranih na usporedbi \gls{pom}-a i opis problematike vrednovanja \gls{pom}-e suvremenih pristupa. Kroz pregled istraživanja opisana je uloga kontekstualizacije kao %najsuvremenijeg 
doprinosa u procjeni \gls{pom}-e te je definiran alternativni pristup vrednovanju \gls{pom}-e koji uvažava kontekstualizaciju. Predstavljena je metodologija usporedbe \gls{pom}-a koju èine odnosni parametri kvalitete, pretpostavke usporedbe i postupak odluèivanja. Metodologija je demonstrirana na usporedbi dvije \gls{pom}-e dobivene iz razlièitih izvora razlièitim postupcima procjene. %Rad predstavlja okvir za donošenje odluka o kvaliteti \gls{pom}-a koje se usporeðuju.

\chapter{Polazišno-odredišna matrica}
 Polazišno-odredišna matrica (\textit{eng. Origin-Destination Matrix}, ODM ili \textit{Trip Table}) je naèin mjerenja pokretljivosti stanovništva na nekom podruèju u prostorno-vremenskom okviru. \gls{pom} služi za opis grupne mobilnosti i mjerenje socio-ekonomske aktivnosti stanovništva nekog podruèja. Najèešæe se koristi u prometnoj znanosti za analizu i strateško planiranje prometnog optereæenja i prometne infrastrukture \cite{Jelusic:2016.}. \gls{pom} može opisivati prometnu potražnju na jednom raskrižju, na podruèju grada, regije, države i šireg podruèja. Poveæenjem opisnog podruèja poveæava se i zahtjevnost prikupljanja podataka za procjenu prometa i za izradu \gls{pom}-e stoga postoji više postupaka prikupljanja podataka i modela za procjenu prometa. %U ovom radu sagledana je \gls{pom}-a za opis urbanog kretanja na podruèju grada.
 
\section{Definicija polazišno-odredišne matrice}

\theoremstyle{definition}
\begin{definition}{Polazišno-odredišna matrica} je matrica èiji svaki element predstavlja broj putovanja izmeðu odgovarajuæeg para zona unutar promatranog podruèja u promatranom vremenskom okviru $\tau$ , u svakom smjeru zasebno. Redovi u \gls{pom}-i $i = 1,2,3...n$ predstavljaju polazišta (izvore) prometnog toka, a stupci $j = 1,2,3...n$ njihova odredišta (ušæa). Element $f_{ij}$ predstavlja broj putovanja iz pripadajuæe polazišne zone $i$ u pripadajuæu ciljnu zonu $j$. Broj putovanja naziva se i širina prometnog toka (eng. \textit{flow}). (slika \ref{fig:matrix}) %\cite{njem:2019.}
\end{definition}
\newpage
\gls{pom} se može smatrati matriènim zapis težinskog, usmjerenog grafa, gdje su težinski faktori usmjerenih veza širine prometnih tokova izmeðu èvorova mreže \cite{njem:2019.}. Èvorovi predstavljaju zone na koje je promatrano podruèje podijeljeno (slika \ref{fig:matrix_2}). Zone u \gls{pom}-i su poredane od zapada prema istoku, te od sjevera prema jugu.

%Also, the order of origins in rows and destinations in columns in reference and estimated OD matrix must be the same. 

\begin{figure}[p]
	\begin{center}
		\includegraphics[width=14cm,keepaspectratio=true]{POM}
		\caption{Polazišno-odredišna matrica. Prema: \cite{njem:2019.}}
		\label{fig:matrix}
	\end{center}
\end{figure}

\begin{figure}[p]
\begin{center}
\includegraphics[width=15cm,keepaspectratio=true]{POM_2}
\caption{Usmjereni graf kretanja i pripadajuæa  polazišno-odredišna matrica. (Zone su oznaèene slovima abecede). Prema: \cite{graf:2019.}}
\label{fig:matrix_2}
\end{center}
\end{figure}

\gls{pom} može biti procijenjena za sadašnje ili planirano prometno optereæenje \cite{Jelusic:2016.}. Može biti prikazana ukupno ili po pojedinim naèinima prijevoza (modalitetima prometnog sustava - osobna vozila, vozila javnog prijevoza, teretna vozila, pješaci itd.) i/ili razlièitim svrhama putovanja (putovanja na posao, putovanja kuæi...) \cite{Jelusic:2016.}.
\label{tranzit}Tranzitna \gls{pom} (eng. \textit{Transient Origin-Destination Matrix}, t-ODM) je vrsta \gls{pom}-e u kojoj su zabilježene poznate tranzicije izmeðu zona. Svaka tranzicija predstavlja onaj dio putovanja koji je poznat, a poèetak i završetak cjelokupnog putovanja kojem pripada su nepoznati \cite{Peterson:2007.}. 

\section{Tradicionalni pristupi procjeni polazišno-odredišne matrice}

\subsection{Izvori ulaznih podataka}
\subsubsection{Ankete}
Tradicionalni pristupi procjeni \gls{pom}-e ukljuèuju metode provoðenja anketiranja. Vrste anketa su: ankete u kuæanstvima, presretanje vozila, anketiranje  prijevoznih kompanija i tvrtki, tranzit na granici, turisti u hotelima i parking \cite{Cools:2010.}. Ankete su zahtjevne iz perspektive utrošenog vremena, uloženog truda i radne snage stoga se ne provode èesto. Anketiranje putovanja u kuæanstvima provodi se na podruèjima veæine razvijenih svjetskih metropola tek \textbf{svakih 5 do 10 godina} \cite{Toole:2015.}. Najveæi postotak investicija u planiranju prometa odlazi na ankete, u prosjeku oko 7.4 milijuna dolara godišnje \cite{Cools:2010.}. Ankete stanovništva bilježe broja stanovnika, broj vozila, broj zaposlenih, broj putovanja odreðenim naèinom prijevoza (automobil, javni prijevoz...) po kuæanstvu \cite{Espad:2013.}. Ostale ankete pokrivaju malen dio populacije te su POM-e dobivene iz anketa optereæene neizbježnom pristranošæu \cite{Alhazzani:2016.}. Studija na podruèju Belgije pokazala je da se zadovoljavajuæa razina kvalitete \gls{pom}-e procijenjene iz anketa u kuæanstvima postiže na uzorku velièine barem 50\% populacije \cite{Cools:2010.}. 
%\todo[inline]{Podjela po subjektima anketa. Predlažem detaljniju razradu u metodološkom smislu, uz korištenje liteature poput:		Hyndman, R J, and Athanasopoulos, G. (2018). Forecasting: Principles and Practice (2nd ed). (Chapter 4: Judgemental Forecast)). Preuzeto s: https://otexts.com/fpp2/judgmental.html}

\subsubsection{Prebrojavanje vozila }
Metode prebrojavanja vozila (engl. \textit{Traffic Counts}) na kljuènim èvorištima prometne infrastrukture manje su zahtjevne za izvoðenje u odnosu na ankete i smanjuju vrijeme i troškove prikupljanja podataka. Postupci ukljuèuju:  ruèno prebrojavanje, analizu nadzornih snimaka prometa, osjetila prometnog toka (radarska, magnetna, video-senzori, zvuèna), automatski sustav za prepoznavanje i oèitovanje registarskih ploèica (engl. \textit{ \glstext{anpr}}, ANPR) \cite{Jelusic:2016.}.
\textbf{Navedenim postupcima nije moguæe pouzdano odrediti stvarna polazišta i odredišta putovanja \cite{Bonnel:2015.}, veæ se ona odreðuju modeliranjem uz uvažavanje pretpostavki} (odlomak \ref{modeling}). Toènost procijenjenih matrica ovisi o: korištenom modelu procjene, grešci ulaznih podataka i infrastrukturi detektora %koju je skupo izmijeniti ili proširiti zbog troškova održavanja i instalacije 
\cite{Bera:2011.} \cite{Kuharic:2016.}. 
Podaci dobiveni opremom koja radi na temelju vizualne percepcije nisu uvijek iskoristivi ako su vremenski uvjeti loši, a nadomjestak kod lošeg vremena je ruèno prebrojavanje \cite{Iqbal:2014.}. 
\subsubsection{Raspored stanica za prebrojavanje}
Stanica za prebrojavanje je položaja u infrastrukturi s kojeg se vrši prebrojavanje \cite{Bera:2011.}. Raspored stanica treba biti planski, a broj dostupnih ureðaja odnosno ljudi ogranièavajuæi je faktor za velièinu podruèja koje je moguæe nadzirati \cite{Bera:2011.}. Toènost \gls{pom}-e poveæava se s brojem stanica \cite{Bera:2011.}. Ureðaji na razlièitim položajima u prometnoj mreži imaju razlièit stupanj utjecaja na procjenu \gls{pom}-e \cite{Bera:2011.}. Važno je odrediti optimalan broj stanica prebrojavanja i njihovih položaja u prometnoj mreži. Optimalni uvjeti æe se dobiti poštujuæi èetiri pretpostavke \cite{Bera:2011.}: \\
\begin{enumerate}
	\item Najmanje jedna stanica prebrojavanja po paru zona.
	\item Stanice trebaju biti na prometnim vezama (cestama) gdje protjeèe najveæi moguæi prometni tok izmeðu te dvije zone.
	\item Odabrana prometna veza treba presijecati što više tokova.
	\item Rezultati prebrojavanja prometa na svim vezama trebaju biti linearno nezavisni.
\end{enumerate}

 \textbf{Prva pretpostavka neæe biti ispunjena ako nisu osigurana sredstva \cite{Bera:2011.}. Prošireni modeli za raspodjelu stanica u današnjim programskim podrškama imaju moguænost ogranièavanja investicija u infrastrukturu za promatranje. Model prometne potražnje može imati 2,000 \gls{taz}, što znaèi da pripadajuæa \gls{pom}-a ima 4 milijuna æelija, dok je u stvarnosti na prometnoj mreži postavljeno svega 1,000 stanica za prebrojavanje \cite{Segovi:2015.}}. Na slici \ref{fig:tco} prikazana je karta grada Orlanda s važnim prometnicama (sivom) i s prosjeènim prometnim tokovima zabilježenim ureðajima za prebrojavanje vozila. \cite{Orlando:2005.} 

\begin{figure}[!htbp]
	\begin{center}
		\includegraphics[width=15cm,keepaspectratio=true]{TC-Orlando}
		\caption{Prikaz prosjeènog broja vozila na vezama (prometnicama) sa stanicama za prebrojavanje radnim danom 2005. Orlando, Florida. \cite{Orlando:2005.}}
		\label{fig:tco}
	\end{center}
\end{figure}

\subsection{Prometne zone}
Prometna zona je službena jedinica prostorne, geografske podjele (zone) kod analize prometa \cite{Alhazzani:2016.}. Strani naziv za prometnu zonu je \textit{Traffic Analisys Zone} \glsfirst{taz}.
 Površina tih jedinica varira i nije uniformna. Podjela na zone se može temeljiti na podjednakoj populaciji, podjednakom broju zaposlenih ili podjednakom broju izlaznih putovanja (jednaka širina izlaznih tokova)\cite{Goulding:2016.}.
Primjerice, svaka zona pokriva prostor na kojem obitava otprilike tri tisuæe ljudi \cite{Goulding:2016.}. 

\textbf{U hijerarhijskoj podjeli kod ankete stanovništva postoje manje i veæe jedinice podjele, a nema podjele koja bi precizno odgovarala \gls{taz}} \cite{Cam:2007.}.
Anketni blokovi odreðeni su kao relativno homogene jedinice kad je rijeè o karakteristikama populacije, ekonomskom statusu i uvjetima života u vrijeme kada su uspostavljeni \cite{Cam:2007.}. 		
Do 2000. godine zastupljen je bio samo jedan model predviðanja prometa, a velièina \gls{taz}  bila je približno jednaka anketnom bloku od 600 do 3,000 ljudi  \cite{Zhao:2017.}. Pojavom kompleksnijih modela predviðanja prometa 
%(i modela upotrebe zemljišta) %land use
poèinju se koristiti sve manje prostorne jedinice jer se poveæava i razina detalja koju noviji modeli mogu ostvariti \cite{Zhao:2017.}. Jedinica veæa od \gls{taz} uvedena 2010. naziva se Traffic Analisys Disrict (TAD) i obuhvaæa oko 20,000 stanovnika, a koristi se za analize na razini države. \cite{Zhao:2017.}  

Kineski grad Shenzhen ima preko 10 milijuna stanovnika i proteže se na 1,991 $km^2$ \cite{sgo:2019.}. Istraživanje objavljeno 2017. koristi podjelu na 3,199 \gls{taz} 
(Vidi sliku \ref{fig:taz}). Zakljuèak iz danih informacija je: prosjek površine \gls{taz} u gradu Shenzhenu 0.62 $km^2$ i u prosjeku jedna zona obuhvaæa više od 3,125 stanovnika.
%U istraživanju iz 2018. \cite{Zheng:2018.} Shenzhen je podijeljen na 996 \gls{taz}.

\begin{figure}[!htbp]
	\begin{center}
		\includegraphics[width=15cm,keepaspectratio=true]{TAZ-Shenzhen}
		\caption{Primjer mreže za analizu prometa 221,14  cesta - plave linije i 3,199 \acrshort{taz} zona - granice oznaèene iscrtanom crnom linijom  \cite{Xie:2017.}}
		\label{fig:taz}
	\end{center}
\end{figure}

%\subsection{Matematièko modeliranje prometa}
\subsection{Model prometa}
\label{modeling}
Modeliranje prometa zahtjeva veliku kolièinu podataka - informacija o prometnoj mreži i prometnoj potražnji. Toènost modelirane (planirane) prometne situacije ovisi o kvaliteti dostupnih informacija te kako su podaci kombinirani, koji težinski faktori su primijenjeni za razlièite izvore \cite{Peterson:2007.}.  Prometna potražnja kljuèna je komponenta te stoga gotovo svaki prometni model zahtjeva \gls{pom}-u koja specificira prometnu potražnju izmeðu zona u prometnoj mreži \cite{Peterson:2007.}. Toèna \gls{pom} osnova je za odluke kod strateških planiranja prometne infrastrukture i u \glstext{its} \cite{Peterson:2007.} koji su zauzvrat kljuèni za izbor ruta u razlièitim sustavima navigacijskog navoðenja. 

Primjeri pretpostavki u modeliranju prometne potražnje su: ukupna dnevna potražnja  podjednaka u oba smjera kod svakog para zona na podruèju grada \cite{Peterson:2007.}, korisnici imaju saznanja o situaciji na cesti \cite{Goulding:2016.}, mobilnost manja zimi nego ljeti \cite{Bonnel:2015.} i broj putovanja po kuæanstvu proporcionalan dohotku \cite{Espad:2013.}.  Klasièan bazni model za procjenu prometne potražnje je gravitacijski model (eng. \textit{Gravity model})  koji kod proraèuna "privlaènosti" 2 zone uzima u obzir \textbf{gustoæu populacije, udaljenost i troškove putovanja}. \textit{Broj putovanja izmeðu dvije zone srazmjeran je velièini aktivnosti odnosno nastajanju i privlaèenju putovanja u tim zonama, a obrnuto proporcionalan prostornoj udaljenosti izmeðu zona ili nekoj drugoj vrsti otpora (vrijeme putovanja, pješaèenja, èekanja, parkiranje, vozarina ili kombinacija svih navedenih otpora) }\cite{Simunovic:2019.}.
Izvedene verzije gravitacijskog modela integriraju i neke druge (socio-ekonomske) faktore \cite{Gundlegard:2016.}. 
%\textbf{Ankete se provode na ogranièenom podskupu populacije, a ogranièen je i broj stanica za prebrojavanje. 

\textbf{Procjena \gls{pom} iz prebrojanih vozila je matematièki pododreðena (više je nepoznanica nego poznatih informacija)} \cite{Segovi:2015.}. To znaèi da bi velik broj matrica odgovarao tako prebrojanim tokovima vozilima. 
\textbf{Prebrojavanje i ankete se kombiniraju u procjeni POM-e.} Temeljna ideja kod modeliranja je \cite{Segovi:2015.}: 
\begin{enumerate}
	\label{seed}
	\item Pronaæi postojeæu POM-u za isto podruèje i raspodjelom njenih tokova na prometnu infrastrukturu simulirati rezultate prebrojavanja na odabranim toèkama u prometnoj mreži \cite{Segovi:2015.}. 
	
	Ako postoji više POM-a za isto podruèje potrebno odabrati onu koja najviše odgovaraju za konkretni sluèaj. Veæina algoritama koristi poèetnu (engl. \textit{seed}) POM-u koja je \textit{najbolja procjena} dosadašnje potražnje, a koja procjenjuje prometnu potražnju u prošlosti (npr. iz ankete po kuæanstvima), nedavnu prometnu potražnju neprecizno ili je potražnja razvijena iz \textit{principa tipiènog ponašanja vozaèa} \cite{Segovi:2015.}. 
	
	\item Poèetnu \gls{pom}-u  modificirati iterativnim procesom evaluacije omjera tokova dodijeljenih prometnim vezama iz \gls{pom}-e i prebrojenih tokova na vezama gdje se promet prebrojavao  \cite{Segovi:2015.}.
	
	U tom iterativnom procesu prometni tokovi iz modificirane \gls{pom}-e ponovno se dodjeljuju prometnoj infrastrukturi (sve dok se ne postigne zadani broj iteracija ili zadovoljavajuæi stupanj sliènosti poèetne i nove \gls{pom}-e - detaljnije u poglavlju \ref{valid}). 
	%Ulaz u svaku iteraciju je i zapis \textit{najmanjih} puteva, izraèunat tijekom uravnotežene raspodjele po prometnoj infrastrukturi. \cite{Segovi:2015.} 
	
\end{enumerate}


\subsection{Vremenski nezavisno i vremenski zavisno modeliranje}

Modeliranje prometa dijeli se na dvije grane: vremenski nezavisnu (statièku, analitièku) i vremenski zavisnu (simulacijsku) %, od kojih svaka ima \textit{makro} i \textit{mikro} razinu
\cite{Espad:2013.}. \textbf{Cilj statièkog modeliranja je analiza prometa za strateška, investicijska planiranja izgradnje nove infrastrukture. Modeli procjenjuju prosjeènu dnevnu prometnu potražnju (period od 16 ili 24 sata) \cite{Espad:2013.} %29:21
. Radi se o vremenski nezavisnoj analizi}. %\cite{Segovi:2015.}.
%***** The traditional, trip-based models assume that the shape of the peak in future years is the same as the shape of the peak today.

\subsubsection{Vremenski zavisno modeliranje}
Vremenski zavisno modeliranje koristi se kod upravljanja prometnom signalizacijom i definiranja rasporeda vožnje javnog prijevoza. Period u kojem se procjenjuje prometna potražnja manji je od jednog dana, primjerice period $\tau$ od 15 minuta \cite{Bera:2011.}\cite{Espad:2013.}. Rijeè je o vremenski zavisnoj analizi prometa.

Neki \textit{Peak-hour} vremenski modeli koji opisuju potražnju za vrijeme dnevnog vrhunca prometne potražnje, procjenjuje potražnju za svaku minutu ($\tau$ = 1 min) \cite{Thakur:2018.}. Modeliranje u stvarnom vremenu svrstava se u vremenski zavisno modeliranje .

\textbf{Veæina razvijenih modela za vremenski zavisno
	modeliranje iz postupka prebrojavanja (engl. \textit{link count}) primjenjuju se na malim, zatvorenim prometnim mrežama kao što su raskrižja, petlje i manje autoceste \cite{Bera:2011.}.
}
%**
\section{Suvremeni pristupi procjeni polazišno-odredišne matrice} %**razvoju

Podatci koje generiraju pametni telefoni i pametne kartice omoguæuju podatkovnim analitièarima razumjeti ponašanje pojedinaca u razlièitim domenama, ukljuèujuæi i njihov obrazac kretanja. 
Informacijske i telekomunikacijske usluge generiraju masivne skupove podataka vezanih za gibanje u prostoru (mobilnost). Danas ti podatci postaju suvremeni izvori podataka o dnevnim mobilnosti stanovništva. Podaci iz tih  suvremenih izvora nisu ciljano prikupljani za analizu mobilnosti stanovništva veæ za pružanje usluge zasnovane na lokaciju te se koristi naziv pasivno prikupljani polazišno-odredišni podaci (engl. \textit{passively collected origin-destination data}) \cite{Pollard:2013.} \cite{Toole:2015.} . \textbf{Suvremeni izvori podataka o položaju mogu ili ne moraju biti vezani uz prometnu infrastrukturu niti za odreðen naèin kretanja}.

Pružatelji usluga zasnovanih na lokaciji i  operatori javne pokretne mreže moraju voditi raèuna o privatnosti pojedinaca kada je rijeè o podatcima koji se prikupljaju, ukljuèujuæi podatke o položaju korisnika. Ukoliko ustupe podatke za razvoj \gls{pom}, ti podaci moraju biti anonimizirani te ne smije postojati moguænost povratnog inženjerstva kojim bi se povratio izvorni identitet. %U pravilu to znaèi povezivanje sa treæim stranama u poslovnom procesu, koje iz nekog razloga dozvoljavaju pristup podacima. 
%Podaci moraju biti anonimizirani prije pristupa da mogu biti korišteni bez razotkrivanja pojedinaca u skladu s postavkama \gls{gdpr}. 
Važno je osigurati anonimnost i dozvolu pojedinca da se podaci koriste u jasno definirane svrhe. Idealno je da operator ustupi veæ anonimizirane podatke stranci koja iz njih procjenjuje  \gls{pom}-e.  %Naèin na koji se štiti od re-inženjeringa identiteta opisan je u odlomku  \ref{re-engineering} .%.\cite{Chen:2019.}} 

\subsection{Pokretna osjetila}

Pokretno osjetilo je ureðaj koji prikuplja opaža vrijednosti definiranih parametara gibanja vozila na koje je postavljeno te ih pohranjuje i prenosi
radi naknadnog procesiranja \cite{Jelusic:2016.}. Vozilo  se kreæe prometnom infrestrukturom, postajuæi tako dijelom prometnog toka. Osnovni podatci koje osjetilo prikuplja su položaj, brzina i smjer kretanja vozila \cite{Jelusic:2016.}.

%localization data, speed, direction of travel, and time information

Nužni zahtjev je poznavanje položaja vozila%u odreðenim vremenskim trenucima
. Ureðaj odreðuje položaj pomoæu prijemnika globalnog navigacijskog satelitskog sustava (\glstext{gnss}) ili se vozilo identificira na odreðenim toèkama u prometnoj mreži, na kojima može ujedno i prenijeti podatke prikupljene od posljednje toèke \cite{Jelusic:2016.}. Anglosaksonski naziv za ovu metodu prikupljanja podataka o stanju u prometu je \textit{\gls{fcd}}. \gls{fcd} metoda zastupljena je u \glstext{its}. \textbf{U prikupljanju podataka sudjeluju ureðajima opremljena taksi vozila, službena vozila, vozila za distribuciju robe i vozila javnog prijevoza} \cite{Jelusic:2016.}. ITS koji zahtijeva podatke u realnom vremenu mora imati uspostavljen komunikacijski sustav za uèestali prijenos podataka o položaju. Prijenos podataka najèešæe se odvija preko \textit{\gls{gsm}}, Wi-fi i Bluetooth komunikacijskih sustava \cite{Jelusic:2016.}.

Ukoliko pokretno osjetilo nije specijalizirani ureðaj veæ pametni telefon koristi se naziv \textit{\glsfirst{fpd}} (FPD) ili \textit{Floating Cellular Data} \cite{Jelusic:2016.}. 
\glstext{fpd} se odnosi na prikupljanje podataka  pomoæu mobilnih (pametnih) telefona neovisno o naèinu  odreðivanja položaja - korištenjem \glstext{gnss}-a ili pomoæu javne pokretne mreže \cite{Jelusic:2016.}.
%Odreðivanje korištenjem \gls{gnss} prijemnika ponovno zahtjeva slanje podataka kao i kod FCD.
Položaj pokretne stanice unutar javne pokretne mreže može se odrediti na dva naèina. Prvi je triangulacija signala koje pokretna stanica hvata iz više baznih stanica. Drugi je izjednaèavanje položaja pokretne stanice s položajem (podruèjem pokrivanja) bazne stanice s kojom je pokretna stanica povezana u trenutku oèitavanja položaja \cite{Jelusic:2016.} \cite{LBS:2018.}.
\subsubsection{Toènost odreðivanja položaja}\label{gnss}
Osnovni postupak odreðivanja položaja pomoæu \glsfirst{gnss} prijamnika sadržani neke pogreške.  Toènost u rangu od 10-20 m je moguæa uz dostupnost signala od najmanje 4 satelita. U urbanom okruženju zgrade i visoke strukture èesto blokiraju vidljivost izmeðu satelita i prijamnika. Rezultat toga je degradacija toènosti odreðenog položaja. 
Napredno odreðivanje položaja podrazumijeva usporedbu i usklaðivanje inicijalno odreðene putanje kretanja s kontekstom (npr. poznatom infrastrukturom) (engl. \textit{map matching})\cite{LBS:2018.}. Njime se postiže toènost u rangu 0-15 m \cite{Jagadeesh:2004.}\cite{LBS:2018.}.

\subsection{Polazišno-odredišna matrica iz zapisa o telekomunikacijskim aktivnostima u javnoj pokretnoj mreži}
U postupku praæenja aktivnosti za potrebe pružanja i naplatu usluga te za održavanje operativnosti same mreže zapisuju se podaci o aktivnostima u javnoj pokretnoj mreži.
Pokretni ureðaj (npr. pametni telefon) je kontinuirano povezan s javnom pokretnom mrežom preko odgovarajuæe bazne stanice, neovisno o telekomunikacijskoj aktivnosti ureðaja. U postupku uspostave poziva, signalizacija ukljuèuje i identifikacijsku oznaku bazne stanice s koje je poziv uspostavljen. Navedena oznaka bilježi se u zapisu o telekomunikacijskoj aktivnosti.
Zapisi o telekomunikacijskoj aktivnosti i detaljima telekomunikacijskih transakcija vode se u odgovarajuæim komponentama javne pokretne mreže pod imenima: \textit{\gls{cdr}}. 
CDR obuhvaæa transakcijske podatke o pozivima, razmjeni kratkih poruka (engl. \textit{Short Messaging System}, \glstext{sms}) i prijenosu podataka pokretnim internetom. Transakcijski podatci ukljuèuju izmeðu ostalog: vremenske trenutke poèetka i završetka telekomunikacijske transakcije (korištenja komunikacijske usluge), vrstu komunikacije, identifikacijske oznake pošiljatelja i primatelja te identifikacijske oznake baznih stanica na koje su u trenutku zapoèinjanja i završetka transakcije bili spojeni pošiljatelj i primatelj (vidi tabele \ref{tab:zapisi1} i \ref{tab:zapisi2})
\newpage
\begin{table}[H]
	
	\renewcommand{\arraystretch}{1.2}
	\caption{Primjer zapisa o telekomunikacijskim aktivnostima (pozivi) \cite{Chen:2019.}}
	\centering
%	\hskip-0.8cm
	\hspace*{-0.8cm}
	\begin{tabular}{|c|c|c|c|c|c|c|}
		\hline
		\makecell{ID\\korisnika}&\makecell{Vrijeme\\dogaðaja}&\makecell{Bazna\\stanica}&pozivatelj&primatelj& \makecell{Dolazni/\\Odlazni}& \makecell{Trajanje\\(s)}
		\\ [0.5ex]
		\hline \hline
		38DA6 & 2015-05-01 18:26:50 & 1921 & 38DA6 & 163B7 & Odlazni & 52\\ [0.5ex] % razmak do iducega retka
		78EC3 & 2015-05-01 14:16:09 & 2189 & 53880 & 78EC3 & Dolazni & 600 \\ [0.5ex]
		\hline	
	\end{tabular}
	\label{tab:zapisi1}
	\\ [5ex]
	\renewcommand{\arraystretch}{1.2}
	\caption{Primjer zapisa o telekomunikacijskim aktivnostima \cite{Stupar:2018.}. Uklonjen je datum, a identifikacijska oznaka bazne stanice (pozivatelja) zamijenjena je njenim položajem. Podatci o baznim stanicama dostupni su u bazama poput OpenCellID\protect\footnotemark	}
	\begin{tabular}{|c|c|c|c|}
		\hline
		ID SIM kartice &Vrijeme&\makecell{Geografska\\dužina}&\makecell{Geografska\\širina}
		\\ [0.5ex]
		\hline \hline
		0055555556&13:10:09&114.0397917&22.5740278
		\\ [0.5ex]
		0055555556&16:08:30&113.8056944&22.7613889
		\\ [0.5ex]
		0055555556&20:50:17&113.8465972&22.7725
		\\ [0.5ex]
		0055555557&23:39:23&114.043854&22.530757
		\\ [0.5ex]
		0055555558&22:13:27&114.043854&22.530757
		\\ [0.5ex]
		%0055555559,23:32:58,114.043854,22.530757
		%0055555560,23:15:24,114.043854,22.530757
		%0055555561,23:52:57,114.043854,22.530757
		%0055555561,23:51:43,114.043854,22.530757
		\hline
	\end{tabular}
	\label{tab:zapisi2}

\end{table}

\footnotetext{\gls{cdr} zapisi ne sadrže uvijek položaje baznih stanica veæ samo njihov ID. Postoji nekoliko javno dostupnih baza kao što je OpenCellID \cite{OpenCellID:2019.} nastalih volonterskim doprinosom koje pohranjuju podatke o procjenama položaja baznih stanica, snazi signala i sl. Položaji se prikupljaju pomoæu aplikacije instalirane na mobilnom ureðaju, registriranjem \gls{gps} položaja i identifikacijske oznake bazne stanice na koju je ureðaj trenutno spojen.
}

Zapisuju se i podatci o prekapèanju pokretnog ureðaja na drugu baznu stanicu (engl. \textit{handover data}) tijekom trajanja telekomunikacijske aktivnosti radi postizanja i održavanja potrebne kvalitete telekomunikacijske usluge, podatci koju skupinu baznih stanica je pokretna stanica spojena, kada je pokretna stanica ukljuèena/iskljuèena iz mreže i optereæenje pojedinog tornja \cite{Chen:2019.}. Svaka skupina baznih stanica ima od 150 do 500 baznih stanica \cite{Bonnel:2015.}. Podatci o skupini na koju je pokretna stanica spojena (engl. \textit{Location Area Updates}) prikupljaju se svakih 20 min do 2 sata neovisno o aktivnosti \cite{Mellegard:2011.}. %**

Novi postupci koriste upravo anonimizirane, èesto višemjeseène \gls{cdr}, kao izvor podataka za procjenu \gls{pom}-a \cite{Frias-Martinez:2012.}\cite{Gundlegard:2016.}\cite{Alhazzani:2016.}. Metodologija korištenja odnosnih elemenata CDR-a za procjenu POM-e predložena je još 1994. godine \cite{Gundlegard:2016.}. 

\begin{definition}{%u postupku putovanja promatranog iz perspektive telekomunikacijskih usluga 
		\label{stop}
		Zaustavljanje je skup minimalno \textit{n} dogaðaja (telekomunikacijskih aktivnosti) u nizu istog korisnika koji su zabilježeni na istom položaju unutar definiranog minimalnog vremenskog perioda (engl.\textit{ Stop}}) . 
	
	Zahtjevom da se radi o više ($n > 1$), a ne jednom ($n = 1$) zabilježenom dogaðaju pokušava se osigurati da se ne radi o tranzitnom veæ o stvarnom zaustavljanju i suzbija se bilježenje lažnog kretanje kod privremenog spajanja na susjednu baznu stanicu \cite{Goulding:2016.}. 
	Ako je $n > 1$ zaustavljanje ima 2 vremenske oznake, trenutak kada je zabilježen poèetak i trenutak kada je zabilježen kraj zaustavljanja.
\end{definition}

\begin{definition}{Putovanje} je skup dva zaustavljanja koja zadovoljavaju unaprijed definirana minimalna i maksimalna ogranièenja meðusobne vremenske i prostorne udaljenosti. Kraj polazišnog zaustavljanja postaje poèetak putovanja, a poèetak odredišnog zaustavljanja kraj putovanja. Niz kontinuiranog zaustavljanja na razlièitim položajima otkriva putanju kretanja.
\end{definition}



\subsubsection{Prostorna podjela - Voronoi teselacija}

Podjelom prema Voronoievoj teselaciji postiže se
\textit{najfinija} prostorna rezolucija \gls{pom}-e
iz \gls{cdr} .

\begin{definition}{Voronoi tesalacija} definirana je skupom toèaka $P$ u ravnini, gdje za svaku toèku $p_i$ Voronoi æeliju $K_i$ èine sve toèke ravnine bliže toj toèki negoli ikojoj drugoj toèki iz skupa \cite{Voronoi:2019.}. Svaka takva æelija dobiva se presjecištem pola prostora izmeðu susjednih toèaka skupa, pa stoga èini konveksni poligon. Dijelovi Voronoiova dijagrama su sve toèke u ravnini koje su ekvidistantne prema dva najbliža položaja (granice poligona). Voronoiovi vrhovi su toèke ekvidistantne tri (ili više) položaja. \cite{Voronoi:2019.}
\end{definition}

Toèke skupa su položaji baznih stanice, a æelije oko njih aproksimacija površine koju ta bazna stanica pokriva (vidi sliku \ref{fig:Voronoi}). Površine prekrivanja u stvarnosti se preklapaju jer podruèje prekrivanja nije sasvim fiksno i ovisi o trenutnoj aktivnosti svake bazne stanice \cite{Bonnel:2015.}. 

\begin{figure}[!htbp]
	\begin{center}
		\includegraphics[width=15cm,keepaspectratio=true]{Voronoi-Shenzhen}
		\caption{Voronoi dijagram 1090 æelija baznih stanica - kineski grad Shenzhen  \cite{Shenzhen:2017.}}
		\label{fig:Voronoi}
	\end{center}
%*** Latitude Longitude zemljopisna širina/dužina, pozadina?
\end{figure}

\textbf{Gustoæa Voronoi æelija dobro je korelirana s gustoæom stanovništva te stoga bolju prostornu rezoluciju ima na podruèjima veæe gustoæe populacije \cite{Gundlegard:2016.}}. Poistovjeti li se položaj korisnika s položajem tornja bazne stanice, \textbf{mjerna nesigurnost odreðivanja položaja iznosi od približno stotinu metara u gusto naseljenom, do nekoliko kilometara u ruralnom podruèju \cite{Calabrese:2011.}}.  Problem predstavlja preklapanje podruèja pokrivanja u stvarnosti \cite{Gundlegard:2016.}. Zbog uravnoteženja optereæenja u mreži (eng. \textit{load balancing}) ureðaj mijenja baznu stanicu na koju je spojen iako svo vrijeme zadržava isti položaj.
\label{load_balancing} \textbf{Uèinak koji uravnoteženje optereæenja ima na definiranje putovanja može se ublažiti odreðivanjem minimalne udaljenost putovanja, zanemarivanjem putovanja u susjedne æelije \cite{Gundlegard:2016.} ili agregacijom podruèja pokrivanja baznih stanica èija je udaljenost manja od 75 m (s dodjelom dogaðaja najaktivnijem tornju) \cite{Goulding:2016.}}.

Analiza snage signala i trenutnih optereæenja okolnih baznih stanica mogu dati jasniji uvid u optereæenje mreže u vremenu poèetka (i trajanja) telekomunikacijske aktivnosti \cite{Chen:2019.}.

%Važno je uzeti u obzir postojanje oscilacija.***TODO: vrati se na ovaj odlomak**

\subsection{Diskretizacija vremena}
Suvremeni izvori podataka o kretanju bilježe vremenski žig uz podatak o položaju što ih èini pogodnima za vremenski zavisnu analizu.
 %(ili nekog drugog izvora podataka o lokaciji), 
Diskretizacija vremena je praktièki neizbježna zbog ogranièene granularnosti \gls{cdr} \cite{Chen:2019.}. 
U literaturi je korištena razlièita vremenska rezolucija (razluèivost) - podjela na vremenske periode $\tau$ od 15 min, 30 min \cite{Schneider:2013.}, 1 sat, 2 sata, 3 sata \cite{Filic:2016.}\cite{Chen:2019.}.
Putovanja ili zaustavljanja dodijeljena su periodima u kojima se odvijaju. 
Još jedna od zastupljenih podjela je na specifiène periode - \textit{radni sati}, \textit{noæni sati}, \textit{komutacijski sati} \cite{Schneider:2013.}\cite{Toole:2015.}\cite{Gundlegard:2016.} u kojoj se promatra gdje pojedinci pretežito borave u tipiènom radnom vremenu te tokom noæi kroz cijelo razdoblje prikupljanja, $\mathcal{T}$. 

\subsubsection{Rekonstrukcija putanja}

Kretanje pojedinca tokom dana najèešæe je rascjepkano, odnosno u nizu postoje "rupe" kada je informacija o kretanju nepoznata zbog nepostojanja aktivnosti u tom vremenu.

\begin{definition}{Potpunost} putanje definirana je izrazom \cite{Chen:2019.}:
	
	\begin{equation}
	potpunost = \frac{n_L}{\tau \times \mathcal{T}}
	\label{eq:potpunost}
	\end{equation}
	gdje je:\\$n_L$ broj zabilježenih položaja (zaustavljanja)\\
	$\tau$ vremenski period\\ $ \mathcal{T} $ duljina ukupnog vremenskog razdoblja za koje su dostupni zapisi.
	
	
	Idealna potpunost je postignuta ako postoji barem jedan zabilježeni položaj (zaustavljanje) po periodu \cite{Chen:2019.}.
	
\end{definition}



Veæa potpunost putanja postiže se ako se osim poziva kao komunikacijskih aktivnosti u obzir uzmu \glstext{sms} poruke i prijenos mobilnih podataka \cite{Chen:2019.}. 
\textbf{Odbacivanje korisnika s niskim stupnjem \textit{potpunosti}  zastupljeno je u istraživanjima razvoja \gls{pom}-a iz \gls{cdr} što dovodi do iskorštavanja tek vrlo malog dijela korisnika - tek 1.67\% i 0.45\% u nekim istraživanjima} \cite{Chen:2019.}.

Rekonstrukcija putanja na osnovu aktivnosti u cijelom vremenskom razdoblju promatranja $ \mathcal{T} $  (npr. 7, 15, 30, 90 dana) nameæe se kao novi postupak koji poveæava broj i toènost rekonstruiranih putanja i smanjuje moguænost povratnog inženjeringa identiteta \label{re-engineering}. Rekonstrukcijom putanja dolazi do poveæanja broja istih putanja (više pojedinaca) koje se odvijaju isto vrijeme, èime se štite pojedinci koji prije postupka jedini imaju veliku potpunost putanja \cite{Chen:2019.}. %**revisit recenicu

\label{valid}
\chapter{Tradicionalni pristupi vrednovanju polazišno-odredišnih matrica}
Postupak vrednovanja %(modela, \gls{pom}-e, neèega)
je objektivna procjena	kvalitete, vrijednosti objekta koji se vrednuje. Pregledom literature o vrednovanju \gls{pom}-e utvrðeno je da se jednoznaèno koriste pojmovi toènost, pouzdanost i kvaliteta \gls{pom}-e. Vrednovanje \gls{pom}-e vrši se postupcima koji koriste mjere razine sliènosti odnosno razlike (greške) s referentnom matricom - a temelj je razlika na razni svakog elementa \gls{pom}-e. 

\textbf{Tradicionalni postupak vrednovanja \gls{pom}-e svodi se na odreðivanje njene sliènosti sa istinitom (engl. \textit{ground truth}) POM-om}  \cite{Travassoli:2016.}. Istinita \gls{pom}-a je POM-a uzeta kao najtoèniji opis stvarnog stanja. Istinita \gls{pom}-a dobivena je tradicionalnim postupcima (anketiranje i/ili prebrojavanje vozila) \cite{Calabrese:2011.}. Statistièke mjere kvantiziraju razliku procijenjenih i pravih vrijednosti (vidi dodatak \ref{dodatak_metrics} - Metrike za vrednovanje polazišno-odredišne matrice). Iz statistièkih mjera sliènosti izdvojen je korelacijski koeficijent odreðenja $R^2$ koji je opisan u narednom potpoglavlju. % zašto je izdvojen?

\textbf{Upravo ta referentna instinita  POM je ujedno i poèetna \gls{pom} (iz odlomka \ref{seed}) u postupku procjene nove \gls{pom}-e iz rezultata prebrojavanja vozila \cite{Segovi:2015.}. \gls{pom} æe biti vrednovana usporedbom s \gls{pom}-om koja se koristi u postupku procjene te iste \gls{pom}-e. Postupak vrednovanja nove \gls{pom}-e stoga je ovisan o kvaliteti poèetne \gls{pom}-e, koja je procijenjena u odnosu njenu poèetnu matricu i tako rekurzivno.}

\subsection{Linearna regresija - Korelacijski koeficijent odreðenja $R^2$}

Tehnika vrednovanja linearnom regresijom procjenjuje vrijednosti æelija jedne \gls{pom}-e (zavisna varijabla - $y$) na temelju vrijednosti druge - referentne istinite \gls{pom}-e (nezavisna varijabla - $x$). Vrijednosti u \gls{pom}-i promatraju se kao skup vrijednosti $i = 1, 2, 3, ...n^2$ ne uzimajuæi u obzir njihovu matriènu strukturu. Pretpostavka kod linearne zavisnosti je da postoje koeficijenti $a$ i $b$ takvi da se za svaku vrijednost nezavisne varijable $x_i$ zavisna varijabla $y_i$ može napisati kao \cite{Kuhlm:2015.}:
\begin{equation}
	y_i = bx_i + a + \epsilon_i
\end{equation}
gdje je :\\ pogreška $\epsilon$ sluèajna varijabla s normalnom raspodjelom i oèekivanom vrijednošæu 0\\$b$ koeficijent smjera pravca linearne regresije\\ $a$ slobodni èlan  (predstavlja križište linije regresije s $y$ osi). 

Linija linearne regresije prikazana je na slici \ref{fig:lm}.

Korelacijski koeficijent odreðenja ili obuhvaæanja varijance $R^2$ je mjera koja %je statistik koji
pokazuje koliko je slaganje izmeðu vrijednosti izraèunatih modelom procjene i izmjerenih, empirijskih vrijednosti %(\textit{ground truth})
. Opæenito, to je mjera dobrote pristajanja (engl. \textit{goodness of fit}) koja govori koliko uspješno model opisuje zavisnost (korelaciju) izmeðu zavisne i nezavisne varijable \cite{Cizmesija:2019.}. $R^2$ predstavlja omjer modelom opisanih varijacija u odnosu na ukupne varijacije podataka \cite{Cizmesija:2019.}:

	 
	 \begin{equation}
	 	R^2 = \frac{\sum{(\hat{y}_i -\bar{y}_i)^2}}{\sum{(y_i - \bar{y})^2}} = 1 - \frac{\sum{(y_i -\bar{y}_i)^2}}{\sum{(y_i - \bar{y})^2}}
	 \end{equation}

Raspon mjere $R^2$ je od 0 do 1, 0 ukazuje na nepostojanje objašnjenja varijance izmeðu izraèunatih i izmjerenih podataka, a 1 ukazuje da je varijanca u potpunosti objašnjena modelom.

Ako su matrice potpuno iste, vrijednost $R^2$ = 1, $a$ = 0 i $b$ = 1. Matrice su sliènije što su vrijednosti bliže navedenima \cite{Kuhlm:2015.}. %predictet vs observed observed vs. predicted
% zadovoljavajuæe
Kod usporedbe dvije POM-e u odnosnu na referentnu istinitu POM-u, ona koja je sliènija referentnoj bolje opisuje kretanje.

Zadovoljavajuæa vrijednost $R^2$ u usporedbi s referentnom istinitom POM-om navodi se 0.99 \cite{Kuhlm:2015.} Ta vrijednost ne smatra se praktiènom za usporedbu POM-a dobivenih razlièitim pristupima procijeni što dolazi do izražaja i kada se radi o \gls{pom}-i iz suvremenih izvora \cite{Kuhlm:2015.}.

\begin{figure}[!htbp]
	\begin{center}
		\includegraphics[width=12cm,keepaspectratio=true]{lm_POM_A_POM_B}
		\caption{ Primjer linearne regresije izmeðu vrijednosti dvije POM-e. Vrijednosti POM-e A su na $x$ osi, a vrijednosti POM-e B su na $y$ osi. Pravac linearne regresije oznaèen je crvenom linijom, reziduali sivim linijama. \\ a = 0.0071273, b = 0.631128, $R^2$ = 0.4026}
		\label{fig:lm}
	\end{center}
\end{figure}

\subsection{Vrednovanje suvremene polazišno-odredišne matrice}

Unaprjeðenje metodologije procjene \gls{pom}-e koja æe pružiti poveæanu kvalitetu i transparentnost uz ispunjavanje suvremenih zahtjeva na tehnologije (cijena, zaštita privatnosti i podataka itd.) privlaèi pažnju i van podruèja prometne znanosti. Suvremeni pristupi koriste alternativne izvore podataka o kretanju za promatranje obrazaca putovanja i pristupe procjeni \gls{pom}-e, no prema \cite{Pollard:2013.} nailaze na problem da prometna struka zahtijeva da se njihova vrijednost dokazuje usporedbom s tradicionalnim pristupima, dobro poznatim u praksi. Za tradicionalnu usporedbu suvremene \gls{pom}-e èija prostorna podjela nije \gls{taz} s \gls{pom}-om èija je prostorna podjela na \gls{taz} traži da se prostorna podjela prilagodi nekoj novoj ili prostornoj podjeli jedne od matrica te da se nakon toga matrice usporede \textit{elementwise}. Prilagodba se u praksi èini agregacijom i/ili interpolacijom tokova. (Detaljnije u Dodatku \ref{dodatak_ppp} - Prilagodba prostorne podjele.) 

%Marta C. Gonzalez validacija sa Traffic counts

\subsection{Grafièki oblik i  sliènost strukture
	\\ polazišno-odredišne matrice}
Vrijednosti u matrici mogu se normalizirati na opseg vrijednosti koji je moguæe prikazati u obliku slike tako da svaka vrijednost predstavlja vrijednost piksela. Razlièite palete korištene su za prikaz raspona, od raspona 0-100  koji predlažu \cite{Filic:2016.}, prikazom nijansama jedne boje 0-255 (engl. \textit{grayscale}) \cite{Vuren:2015.}, paletom nijansa 2 boje, ili kojom drugom proizvoljnom paletom s više boja %(vidi paletu boja na slici \ref{fig:journeys})
.

Nekolicina autora istièe važnost strukturalne sliènosti s referentnom matricom kao važnu mjeru kvalitete \gls{pom}-e jer visoka razina strukturalne sliènosti može biti prisutna i kod \gls{pom}-a s manjom razinom sliènosti prema statistièkim mjerama \cite{Djukic:2013.}\cite{Pollard:2013.}\cite{Vuren:2015.}. Takoðer, strukturalna sliènost je (vizualno) vidljiva u grafièkom obliku \gls{pom}-e. \textbf{Strukturalna sliènost dobro odgovara ljudskoj vizualnoj percepciji sliènosti slika} \cite{Renieblas:2017.}.  

\subsubsection{Višerazinski indeks strukturalne sliènosti} 

Višerazinski indeks strukturalne sliènosti (engl. \textit{\glsfirst{mssim}}, MSSIM) dolazi iz podruèja raèunalne obrade slike i koristi se kao mjera usporedbe digitalnih slika (\textit{eng. measure of comparison)}. Ideja o korištenju  MSSIM u analizi urbanog kretanja stanovništva za mjerenje sliènosti \gls{pom}-a prvi puta se spominje i demonstrira na simuliranim \gls{pom}-ma dobivenim iz referentne \gls{pom}-e dodavanjem šuma \cite{Djukic:2013.}.

Informacija o strukturi slike definira se kao atributi slike koji predstavljaju strukturu objekata na sceni, i neovisni su o prosjeènom osvjetljenju i kontrastu. Jer osvjetljenje i kontrast mogu znatno varirati na sceni, moraju se u obzir uzeti samo njihove lokalne vrijednosti \cite{Renieblas:2017.}

Indeks strukturalne sliènosti (engl. \textit{\glsfirst{ssim}}, SSIM) se bazira na degradaciji strukturalnih informacija na jednoj slici u usporedbi s drugom (referentnom) slikom. \glstext{ssim} se raèuna za svaki kvadratni blok velièine %$N \times N$ (???) 
$N$ elemenata na naèin da se jezgra (da bi obuhvatila novi blok) pomièe æeliju po æeliju dok ne proðe preko cijele slike. \glstext{mssim} je srednja vrijednost svih \glstext{ssim}.

\subsubsection{Osnovni višerazinski indeks strukturalne sliènosti}

Neka su $X$ i $Y$ matrice koje usporeðujemo a  $x = \{x_n| x = 1,2,...,N\} $ i $y = \{y_n| y = 1,2,...,N\}$ parovi vrijednosti kvadratnih prozora velièine jezgre na istim pozicijama u  $X$ i $Y$; $SSIM$ je odreðen prosjeènim vrijednostima $\mu_x$ i $\mu_y$ sa standardnim devijacijama $\sigma_x$ i $\sigma_y$ i kovarijancom $\sigma_xy$ \cite{Renieblas:2017.}


\begin{equation}
l(x,y) = (2\mu_x\mu_y +C1)/(\mu_x^2+\mu_y^2 +C1)\label{eq:l}
\end{equation}
\begin{equation}
c(x,y) = (2\sigma_x\sigma_y +C2)/(\sigma_x^2+\sigma_y^2 +C2)\label{eq:c}
\end{equation}
\begin{equation}
s(x,y) = (\sigma_xy+C3)/(\sigma_x\sigma_y +C3)\label{eq:s}
\end{equation}

Izraz $l(x,y)$ opisuje razliku u osvjetljenju, $c(x,y)$ razliku u kontrastu, a s(x,y) razliku u strukturi izmeðu $x$ i $y$. $C1$, $C2$ i $C3$ su konstante uvedene da se izbjegne "nestabilnost" kada su nazivnici bliski 0.
Opæa forma SSIM definira se kao \cite{Renieblas:2017.}:

\begin{equation}
SSIM(x,y) =[l(x,y)^\alpha][c(x,y)^\beta][s(x,y)^\gamma]\label{eq:ssim}
\end{equation}
%where ?, ?, and ? are parameters that define the relative importance of each component
gdje su $\alpha$, $\beta$ i $\gamma$ parametri relativne važnosti svake komponente. Za SSIM vrijedi slijedeæe:
\begin{subequations}
	\begin{align}
		SSIM(x,y)\leq 1  	\label{subeq:boundry} \\
		SSIM(x,y) = SSIM(y,x)		\label{subeq:simetrical}\\
		SSIM(x,y) = 1 \iff x = y \label{subeq:unique_maximum} 
	\end{align}
	\label{subeq:obje}
\end{subequations}

\begin{equation}
MSSIM(X,Y) =  \frac{1}{M} \sum_{m=1}^{M} SSIM(x_m,y_m) \label{eq:mssim}
\end{equation}
%\cite{Renieblas:2017.}


\begin{figure}[!htpb]
	\begin{center}
		\subfloat[Vrijednost metrike toènosti MSE jednak je za obje \gls{pom}-e b) i c) u odnosu na referentnu istinitu \gls{pom}-u a). Indeks strukturalne sliènosti se znatno razlikuje, gdje \gls{pom} b) ima veæu strukturalnu sliènost s a) nego što ima c). Podsjetimo se da za \glstext{ssim} vrijedi (\ref{subeq:obje}). Lako je na matrici c) \textit{golim okom } uoèiti narušenost strukturalne sliènosti. ]{\label{fig:mssim_1}
			\includegraphics[width=14cm,keepaspectratio=true]{mssim_1}}\\ 
		%\hspace{10pt}
		\subfloat[Vrijednost metrike strukturalne sliènosti iznosi 0.904 za obje \gls{pom}-e b) i c) u odnosu na referentnu \gls{pom}-u a), dok se MSE razlikuje (veæi MSE znaèi veæu razliku). Obje \gls{pom}-e dobivene su dodavanjem Gaussianovog šuma na referentnu matricu.]
		{\label{fig:mssim_2}
			\includegraphics[width=14cm,keepaspectratio=true]{mssim_2}}
		\caption{Narušenu strukturalnu sliènost lakše je uoèiti nego narušen MSE
			%SSIM (i MSSIM)  u odnosu na referentnu POM-u može biti korišten kao dodatna informacija (\textit{goodness of fit} mjera)  prilikom vrednovanja POM-e 
			\cite{Djukic:2013.}.
		} 
		\label{fig:mssim}
	\end{center}
\end{figure}

\subsubsection{Poboljšani višerazinski indeks strukturalne sliènosti} 
Nekoliko godina nakon prvog spominjanja MSSIM kao metrike usporedbe \gls{pom}-a Vuren \cite{Vuren:2015.} se dotièe 3 problema postavljajuæi pitanja: Koliko treba biti veliki blok? Kako usporediti "guste" i "rijetke" \gls{pom}-e? Koja je prihvatljiva vrijednost MSSIM? Autori definiraju poboljšani model koji nazivaju 4D-MSSIM u izraèun kojeg dodaju stvarne euklidske udaljenosti prostornih zona. Tehnike bazirane na strukturalnoj sliènosti i njihov doprinos još su uvijek otvorene za raspravu \cite{Pollard:2013.}\cite{Varun:2013.}\cite{Vuren:2015.}.